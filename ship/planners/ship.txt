type place;
type pirate;
type world;

property power(character : character) : number;
property injured(character : character) : number;
property satisfaction(character : character) : number;
property state(character : character) : number; //0 - nic 1- odwrócenie uwagi 2 -ogłuszenie
property at(character : character) : place;
property treasure(character : character) : number;
property altruism(character : character) : number;
property ambition(character : character) : number;
property knows_location_treasure(character : character) : number;
property has_access_pirates(character : character) : number;

property world_state(world : world) : number; //dzień, noc, słaba pogoda 
property later(world : world) : boolean;
property captain_knows_location_treasure(world : world) : number;
property pirates_knows_location_treasure(pirate : pirate) : number;
property pirates_relation(pirate : pirate) : number; //słaba, neutralna, dobra
property pirates_power(pirate : pirate) : number; 
property pirates_treasure(pirate : pirate) : number; 

property distraction(place:place) :number;

entity char1 : character;
entity char2 : character;
entity char3 : character;

entity world:world;
entity pirates:pirate;

entity  ship : place;
entity  pirate_base : place;
entity  treasure_place : place;


ambition(char1) = 1;
altruism(char1) = 1;
!later(world);
pirates_relation(pirates) = 0;
pirates_treasure(pirates) = 1;
pirates_power(pirates) = 1;
treasure(char2) = 0;
at(char2) = ship;
world_state(world ) = 0;
knows_location_treasure(char2) = 1;
knows_location_treasure(char1) = 0;

action travel(character : character,  to : place){
	precondition:
		(
		(to==pirate_base & has_access_pirates(character)==1)
		|
		(to==treasure_place & knows_location_treasure(character) ==1)
		|
		(to==ship)
		)
		& character == char1
		;
	effect:
		later(world)&
		at(character) = to;
	consenting: character; 
	
};

action distraction(character : character,  place : place){
	precondition:
		at(character) == place & character == char1;
		
	effect:
		distraction(place) =1 & later(world);
	consenting: character; 
	
};

action stun(character : character,character2 : character, place : place){
	precondition:
		at(character) == place &
		at(character2) == place &
		distraction(place)==1 &
		character != character2 
		
		& character == char1;
		
	effect:
		if (altruism(character) > 0)
			satisfaction(character) = satisfaction(character) - 1 
		&state(character2) = 2
		& later(world);
	consenting: character; 
	
};


action escape(character : character){
	precondition:
		at(character) == ship &
		distraction(ship) == 1
		
		
		& character == char1;
		
	effect:
		if (ambition(character) == 0 | injured(character) == 1) 
			satisfaction(character) = satisfaction(character) + 1
		& later(world);
	consenting: character; 
	
};

action escape_pirates_help(character : character){
	precondition:
		at(character) == ship &
		(distraction(ship) == 1 & pirates_relation(pirates) == 1) |
		pirates_power(pirates) == 0 |
		world_state(world) > 0 
		
		& character == char1;
		
	effect:
		if (ambition(character) == 0 | injured(character) == 1) 
			satisfaction(character) = satisfaction(character) + 1
		& later(world);
	consenting: character; 
	
};

action take_treasure_char(character : character,character2 : character, place : place){
	precondition:
		at(character) == place &
		at(character2) == place &
		state(character2) == 2 &
		character != character2 &
		treasure(character2) > 0
		& character == char1;
		
	effect:
		if (altruism(character) > 0)
			satisfaction(character) = satisfaction(character) - 1 
		&
		if (ambition(character) > 0)
			satisfaction(character) = satisfaction(character) + 1 
		&
		treasure(character2) = treasure(character2) - 1 &
		treasure(character) = treasure(character) + 1
		& later(world);
	consenting: character; 
	
};

action take_treasure_location_char(character : character,character2 : character, place : place){
	precondition:
		at(character) == place &
		at(character2) == place &
		state(character2) == 2 &
		character != character2 &
		knows_location_treasure(character2)==1
		& character == char1;
		
	effect:
		if (altruism(character) > 0)
			satisfaction(character) = satisfaction(character) - 1 
		&
		
		knows_location_treasure(character)=1
		& later(world);
	consenting: character; 
	
};

action get_access_pirates(character : character){
	precondition:
		pirates_relation(pirates) == 1 |
		pirates_power(pirates) == 0 |
		world_state(world) > 0 
		& character == char1
		;
	effect:
		later(world)&
		has_access_pirates(character) = 1;
	consenting: character; 
	
};

action tell_treasure_location(character : character,character2 : character){
	precondition:
		
		knows_location_treasure(character)==1
		& character == char1
		;
	effect:
		later(world)&
		knows_location_treasure(character2)=1;
	consenting: character; 
	
};


action get_treasure(character : character){
	precondition:
		
		knows_location_treasure(character)==1
		&treasure(character) < 2
		& character == char1
		;
	effect:
	
		if (ambition(character) > 0)
			satisfaction(character) = satisfaction(character) + 1 
		&
		later(world)&
		treasure(character) = treasure(character) + 1;
	consenting: character; 
	
};

action give_pirates_treasure_location(character : character){
	precondition:
		pirates_knows_location_treasure(pirates)==0 &
		knows_location_treasure(character)==1
		& character == char1
		& at(character) == pirate_base
		;
	effect:
		later(world)&
		pirates_knows_location_treasure(pirates)= 1 &
		pirates_relation(pirates) = pirates_relation(pirates) + 1;
	consenting: character; 
	
};


action give_pirates_treasure(character : character){
	precondition:
		treasure(character) > 0
		& character == char1
		& at(character) == pirate_base
		;
	effect:
		if (ambition(character) > 0)
			satisfaction(character) = satisfaction(character) - 1 
		&
		later(world)&
		treasure(character) = treasure(character) - 1 &
		pirates_treasure(pirates) = pirates_treasure(pirates) + 1 &
		pirates_relation(pirates) = pirates_relation(pirates) + 1;
	consenting: character; 
	
};

action take_pirates_treasure(character : character){
	precondition:
		has_access_pirates(character) == 1
		& pirates_treasure(pirates) > 0
		& character == char1
		&((pirates_power(pirates) == 0 ) | distraction(pirate_base) == 1 )
		& at(character) == pirate_base
		
		;
	effect:
		if (ambition(character) > 0)
			satisfaction(character) = satisfaction(character) + 1 
		&
		later(world)&
		treasure(character) = treasure(character) + 1 &
		pirates_treasure(pirates) = pirates_treasure(pirates) - 1 &
		pirates_relation(pirates) = pirates_relation(pirates) - 1;
	consenting: character; 
	
};

action wait_for_night(character : character){
	precondition:
		world_state(world) == 0 
		& character == char1
		;
	effect:
		later(world)&
		world_state(world) =  1 ; 
	consenting: character; 
	
};

action attack_pirate_base(character : character){
	precondition:
		power(character) > 0
		& character == char1
		;
	effect:
		later(world)&
		pirates_power(pirates) = pirates_power(pirates) - 1
		 ; 
	consenting: character; 
	
};

action train(character : character){
	precondition:
		 character == char1
		;
	effect:
		later(world)&
		power(character) = power(character) + 1
		 ; 
	consenting: character; 
	
};

action predictaction_1_travel(char : character){  precondition: later(world) & ( ( at(char1)==treasure_place| at(char1)==pirate_base) |( at(char1)==treasure_place| at(char1)==pirate_base)) & ( ambition(char1)==0) ;  effect:  at(char1) = ship }; 





utility():
	treasure(char1) == 1;

utility(char1): satisfaction(char1);


utility(char2): satisfaction(char2);

utility(char2): satisfaction(char2);